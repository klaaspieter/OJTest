#!/usr/bin/env objj

@import <OJUnit/OJTestRunnerText.j>
@import <OJCov/OJCoverageRunnerText.j>

CPLogRegister(CPLogPrint, "warn");

var parser = new (require("args").Parser)();

parser.usage("INPUT_FILE ...");
parser.help("Runs the given suite of tests.");

parser.option("-c", "coverage")
    .def(false)
    .set(true)
    .help("Runs test coverage along with your OJUnit tests.");

parser.helpful();

function main(args) {
    var options = parser.parse(args);
    
    if (options.args.length < 1)
    {
        parser.printUsage(options);
        return;
    }
    
    if(options.coverage) {
        var runner = [[OJCoverageRunnerText alloc] init];
    } else {
        var runner = [[OJTestRunnerText alloc] init];
    }
    
    [runner startWithArguments:args.slice(1)];
}
